FROM ubuntu:20.04

WORKDIR /root/
RUN sed -i s@/archive.ubuntu.com/@/mirrors.tuna.tsinghua.edu.cn/@g /etc/apt/sources.list
RUN apt update && apt install -y sudo lsb-release socat curl tmux net-tools git && rm -rf /var/lib/apt/lists/* && \
    git clone https://github.com/liyansong2018/firmware-analysis-plus.git && apt purge -y git && apt autoremove --yes

WORKDIR /root/firmware-analysis-plus
COPY ./data/* .
RUN chmod +x setup_docker.sh start-fap.sh && ./setup_docker.sh

CMD ["/bin/bash", "./start-fap.sh"]
