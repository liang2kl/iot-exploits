FROM ubuntu:16.04

ENV USER root
WORKDIR /root/firmware-analysis-plus

RUN sed -i s@/ports.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list && apt-get clean && \
    apt-get update && apt-get install -y curl tmux rinetd ssh qemu qemu-user-static qemu-system bridge-utils uml-utilities net-tools && \
    apt-get clean autoclean && apt-get autoremove --yes && rm -rf /var/lib/apt/lists/*

COPY start-qemu.sh .
COPY squashfs-root/ ./squashfs-root/
COPY debian_squeeze_mips_standard.qcow2 .
COPY vmlinux-2.6.32-5-4kc-malta .

RUN chmod +x start-qemu.sh

CMD ["./start-qemu.sh"]
