#!/bin/bash
set -e

TARGET=target
PORT=8080

echo "Waiting for target server to start..."
while [[ "$(curl -m 1 -s -o /dev/null -w ''%{http_code}'' ${TARGET}:${PORT})" != "200" ]]; do sleep 2; done
echo "Server started!"

python3 exploit.py
echo "Exploit succeeded!"
